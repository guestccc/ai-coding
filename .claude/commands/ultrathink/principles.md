# UltraThink Core Principles v1.2.0

## 20次交互预算管理 ⏱️

**总交互限制**: 20次 (每次10分钟，总计4小时)

**交互分配策略**:
```yaml
需求设计阶段 (T1-T6):  6次交互
  T1: 需求分析和PRD生成
  T2: 技术架构设计
  T3: OpenAPI规范定义
  T4: 原型设计
  T5: 技术选型验证
  T6: 设计阶段总结

开发实现阶段 (T7-T16): 10次交互
  T7-T8: Mock服务和数据结构
  T9-T12: 前端开发实现
  T13-T16: 后端开发实现

测试部署阶段 (T17-T20): 4次交互
  T17: 前后端集成
  T18: 端到端测试
  T19: 性能优化和部署准备
  T20: 最终验收和发布
```

## PDCA质量管理循环 🔄

每个开发环节都遵循PDCA循环：

**Plan (计划)**:
- 明确当前交互的目标
- 制定具体的执行计划
- 设定质量检查标准

**Do (执行)**:
- 严格按计划执行开发任务
- 记录执行过程和发现的问题
- 确保产出符合预期

**Check (检查)**:
- Agent验证和质量检查
- 与既定标准对比
- 识别改进机会

**Act (行动)**:
- 记录决策和问题解决方案
- 更新项目上下文
- 为下一循环做准备

## SOLID/KISS/DRY/YAGNI设计原则 📐

**SOLID原则**:
- **S**ingle Responsibility: 每个模块职责单一明确
- **O**pen/Closed: 对扩展开放，对修改封闭
- **L**iskov Substitution: 子类可以替换父类
- **I**nterface Segregation: 接口隔离，避免臃肿
- **D**ependency Inversion: 依赖抽象，不依赖具体

**KISS原则** (Keep It Simple, Stupid):
- 避免过度设计和复杂化
- 优先选择简单直观的解决方案
- 代码易读易维护

**DRY原则** (Don't Repeat Yourself):
- 避免代码重复
- 提取公共逻辑和组件
- 建立可复用的模式

**YAGNI原则** (You Aren't Gonna Need It):
- 只实现当前需要的功能
- 避免为未来可能的需求过度设计
- 保持架构灵活但不过度抽象

## TDD测试驱动开发 (强制要求) 🧪

**TDD三步循环**:
1. **Red**: 先写测试，运行失败
2. **Green**: 写最少代码使测试通过
3. **Refactor**: 重构代码，保持测试通过

**测试覆盖率要求**:
- 单元测试覆盖率 ≥ 80%
- 核心业务逻辑覆盖率 ≥ 95%
- 所有P0功能必须有端到端测试

**测试策略**:
```yaml
单元测试 (70%): 快速反馈，隔离测试
集成测试 (20%): API和数据库测试  
端到端测试 (10%): 用户场景验证
```

## 问题解决与记录 📝

**问题解决策略**:
- 修复问题时不使用硬编码或临时方案
- 建立问题排查文档，记录解决思路
- 每次解决问题后检查是否有同类问题
- 优化方案，避免问题复现

**知识管理**:
- 思考链管理: 记录中间思考、计划和关键发现
- 更新`project/context/thinking-chain.md`维护AI上下文
- 记录架构决策到`project/context/decisions.md`  
- 跟踪进度到`project/context/progress.md`

## Token优化策略 ⚡

**记录优化技巧**:
- 长句→技术术语 (`用户认证功能` → `Auth`)
- 详细描述→核心要点 (`完整的用户管理系统` → `用户CRUD`)

**使用缩写**:
```yaml
技术缩写:
  FE: 前端, BE: 后端, DB: 数据库, API: 接口
  UI: 界面, UX: 体验, CRUD: 增删改查
  TDD: 测试驱动, DDD: 领域驱动, SOLID: 设计原则

业务缩写:
  PRD: 产品需求文档, API: 应用程序接口
  MVP: 最小可行产品, POC: 概念验证
```

**结构化格式**:
- 表格 > 列表 > 段落
- YAML > JSON > 自然语言描述
- 检查清单 > 详细说明

## 核心约束 🔒

1. **必须一次性完成**: 没有时间反复调试
2. **TDD是强制要求**: 确保代码质量
3. **每次交互有明确产出**: 可量化的进展
4. **质量优于速度**: 一次做对胜过多次返工
5. **文档驱动开发**: 先有规范，后有实现